name: lxi-tools
summary: Open source LXI tools
description: >
  Lxi-tools is a collection of open source software tools for managing LXI
  compatible instruments such as modern oscilloscopes, power supplies, spectrum
  analyzers etc.

version: '1.22'
base: core20
grade: devel
confinement: strict

apps:
  lxi:
    command: usr/bin/lxi
    plugs: [home, network, avahi-observe]
      #  lxi-gui:
      #    command: lxi-gui
      #    plugs: [home, network, avahi-observe, wayland, x11, opengl, removable-media]

build-packages:
  - pkg-config
  - cmake

parts:

  liblxi:
    plugin: meson
    source: https://github.com/lxi-tools/liblxi.git
    source-depth: 1
    meson-parameters: [--prefix=/usr]
    build-packages:
      - libavahi-core-dev
      - libavahi-common-dev
      - libavahi-client-dev
      - libxml2-dev
      - libtirpc-dev
    stage-packages:
      - libavahi-core7
      - libavahi-common3
      - libavahi-client3
      - libxml2
      - libicu66

  lxi-tools:
    after: [ liblxi ]
    plugin: meson
    source: https://github.com/lxi-tools/lxi-tools.git
    source-depth: 1
    meson-parameters: [--prefix=/usr]
    build-packages:
      - libreadline-dev
      - liblua5.2-dev
      - bash-completion
    stage-packages:
      - libreadline5
      - liblua5.2-0
      - bash-completion
